<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ğŸ„ ä¸“å±è®°å¿†åœ£è¯æ ‘</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: sans-serif; }

        /* åŠ è½½é¡µ */
        #loading {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a1a1a;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: #ffd700; z-index: 999; transition: opacity 1s;
        }

        /* é€€å‡ºæŒ‰é’® */
        #exit-btn {
            position: absolute; top: 20px; left: 20px;
            width: 40px; height: 40px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white; text-decoration: none; font-size: 20px;
            z-index: 100; border: 1px solid rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <!-- é€€å‡ºæŒ‰é’® -->
    <a href="/" id="exit-btn">Ã—</a>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div id="loading">
        <div style="font-size: 40px; margin-bottom: 20px;">ğŸ„</div>
        <div>æ­£åœ¨æ”¶é›†è¿™ä¸€å¹´çš„å›å¿†...</div>
    </div>

    <!-- 3D ç”»å¸ƒå®¹å™¨ -->
    <div id="scene-container"></div>

    <!-- å¼•å…¥ Three.js (ä½¿ç”¨ CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- å¼•å…¥è½¨é“æ§åˆ¶å™¨ (ç”¨äºæ—‹è½¬è§†è§’) -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <!-- å¼•å…¥ TWEEN (ç”¨äºåŠ¨ç”») -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>

    <script>
        // 1. è·å–æ•°æ®
        fetch('/api/christmas_data')
            .then(response => response.json())
            .then(data => {
                console.log("æ”¶åˆ°çš„ç¤¼ç‰©:", data);
                // è¿™é‡Œæ˜¯ä¸‹ä¸€æ­¥è¦å†™çš„ 3D ä»£ç å…¥å£
                init3D(data);
            })
            .catch(err => {
                console.error("æ•°æ®è·å–å¤±è´¥", err);
                alert("åŠ è½½å¤±è´¥ï¼Œè¯·å›é¦–é¡µé‡è¯•");
            });

        function init3D(data) {
            const loading = document.getElementById('loading');

            // æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹...
            setTimeout(() => {
                loading.style.opacity = 0;
                setTimeout(() => loading.style.display = 'none', 1000);
            }, 1000);

            // ä¸‹æ¬¡æˆ‘ä»¬åœ¨è¿™é‡Œå†™ Three.js ä»£ç !
        }
    </script>
</body>
</html>